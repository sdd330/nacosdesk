# é…ç½®ç®¡ç† API æµ‹è¯•ç”¨ä¾‹

> **API è·¯å¾„å‰ç¼€**: `/nacos/v1/cs/configs`  
> **æµ‹è¯•æ–‡ä»¶**: `src-tauri/src/server/tests/config_tests.rs`

---

## 1. é…ç½®å‘å¸ƒ API (`POST /v1/cs/configs`)

### 1.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šå‘å¸ƒæ–°é…ç½®ï¼ˆæˆåŠŸï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_success`
- **å‰ç½®æ¡ä»¶**: 
  - åˆ›å»ºæµ‹è¯•æ•°æ®åº“
  - å¯é€‰ï¼šæ’å…¥æµ‹è¯•å‘½åç©ºé—´ï¼ˆå¦‚éœ€è¦ï¼‰
- **è¯·æ±‚**:
  - æ–¹æ³•: `POST`
  - URI: `/nacos/v1/cs/configs?dataId=test-config&group=DEFAULT_GROUP&tenant=public&content=test-content`
  - Headers: `Content-Type: application/x-www-form-urlencoded`
  - Body: ç©ºï¼ˆå‚æ•°åœ¨ URL ä¸­ï¼‰
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `true`ï¼ˆå­—ç¬¦ä¸²ï¼‰
- **éªŒè¯ç‚¹**:
  - å“åº”çŠ¶æ€ç ä¸º 200
  - å“åº”ä½“ä¸º "true"
  - æ•°æ®åº“ä¸­é…ç½®å·²åˆ›å»ºï¼ˆå¯é€‰éªŒè¯ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ›´æ–°å·²å­˜åœ¨é…ç½®ï¼ˆæˆåŠŸï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_update_existing`
- **å‰ç½®æ¡ä»¶**:
  - åˆ›å»ºæµ‹è¯•æ•°æ®åº“
  - æ’å…¥æµ‹è¯•é…ç½®ï¼š`dataId=test-config`, `group=DEFAULT_GROUP`, `tenant=public`, `content=old-content`
- **è¯·æ±‚**:
  - æ–¹æ³•: `POST`
  - URI: `/nacos/v1/cs/configs?dataId=test-config&group=DEFAULT_GROUP&tenant=public&content=new-content`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `true`
- **éªŒè¯ç‚¹**:
  - å“åº”çŠ¶æ€ç ä¸º 200
  - æ•°æ®åº“ä¸­é…ç½®å†…å®¹å·²æ›´æ–°ä¸º "new-content"
  - MD5 å€¼å·²æ›´æ–°

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸åŒé…ç½®æ ¼å¼
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_different_formats`
- **æµ‹è¯•åœºæ™¯**:
  1. TEXT æ ¼å¼: `content=plain text content`
  2. JSON æ ¼å¼: `content={"key":"value"}`
  3. YAML æ ¼å¼: `content=key: value`
  4. XML æ ¼å¼: `content=<root><key>value</key></root>`
  5. Properties æ ¼å¼: `content=key=value`
- **è¯·æ±‚**: åŒä¸Šï¼Œä»… content å‚æ•°ä¸åŒ
- **é¢„æœŸå“åº”**: æ‰€æœ‰æ ¼å¼éƒ½åº”è¿”å› `200 OK` å’Œ `true`

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸åŒå‘½åç©ºé—´
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_different_namespaces`
- **å‰ç½®æ¡ä»¶**:
  - åˆ›å»ºæµ‹è¯•æ•°æ®åº“
  - æ’å…¥æµ‹è¯•å‘½åç©ºé—´ï¼š`namespace_id=test-ns`, `namespace_name=Test Namespace`
- **æµ‹è¯•åœºæ™¯**:
  1. `tenant=public`ï¼ˆé»˜è®¤å‘½åç©ºé—´ï¼‰
  2. `tenant=test-ns`ï¼ˆè‡ªå®šä¹‰å‘½åç©ºé—´ï¼‰
- **éªŒè¯ç‚¹**: ä¸¤ä¸ªå‘½åç©ºé—´éƒ½èƒ½æˆåŠŸåˆ›å»ºé…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸åŒ Group
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_different_groups`
- **æµ‹è¯•åœºæ™¯**:
  1. `group=DEFAULT_GROUP`ï¼ˆé»˜è®¤ç»„ï¼‰
  2. `group=custom-group`ï¼ˆè‡ªå®šä¹‰ç»„ï¼‰
- **éªŒè¯ç‚¹**: ä¸¤ä¸ªç»„éƒ½èƒ½æˆåŠŸåˆ›å»ºé…ç½®

### 1.2 å‚æ•°éªŒè¯æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šç¼ºå°‘å¿…éœ€å‚æ•° dataId
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_missing_dataid`
- **è¯·æ±‚**: `POST /nacos/v1/cs/configs?group=DEFAULT_GROUP&tenant=public&content=test`
- **é¢„æœŸå“åº”**: `400 Bad Request` æˆ– `500 Internal Server Error`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

#### æµ‹è¯•ç”¨ä¾‹ï¼šç¼ºå°‘å¿…éœ€å‚æ•° group
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_missing_group`
- **è¯·æ±‚**: `POST /nacos/v1/cs/configs?dataId=test&tenant=public&content=test`
- **é¢„æœŸå“åº”**: `400 Bad Request` æˆ–ä½¿ç”¨é»˜è®¤å€¼ `DEFAULT_GROUP`
- **éªŒè¯ç‚¹**: æ ¹æ®å®ç°éªŒè¯è¡Œä¸º

#### æµ‹è¯•ç”¨ä¾‹ï¼šç¼ºå°‘å¿…éœ€å‚æ•° content
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_missing_content`
- **è¯·æ±‚**: `POST /nacos/v1/cs/configs?dataId=test&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**: `400 Bad Request` æˆ– `500 Internal Server Error`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ— æ•ˆçš„å‘½åç©ºé—´ ID
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_invalid_namespace`
- **è¯·æ±‚**: `POST /nacos/v1/cs/configs?dataId=test&group=DEFAULT_GROUP&tenant=non-existent-ns&content=test`
- **é¢„æœŸå“åº”**: `400 Bad Request` æˆ– `404 Not Found`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

#### æµ‹è¯•ç”¨ä¾‹ï¼šè¶…é•¿é…ç½®å†…å®¹
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_very_long_content`
- **å‰ç½®æ¡ä»¶**: åˆ›å»ºè¶…é•¿å†…å®¹ï¼ˆä¾‹å¦‚ 1MBï¼‰
- **è¯·æ±‚**: åŒ…å«è¶…é•¿ content å‚æ•°
- **é¢„æœŸå“åº”**: `200 OK`ï¼ˆå¦‚æœæ”¯æŒï¼‰æˆ– `413 Payload Too Large`
- **éªŒè¯ç‚¹**: æ ¹æ®å®ç°éªŒè¯è¡Œä¸º

### 1.3 è¾¹ç•Œæƒ…å†µæµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šç©ºé…ç½®å†…å®¹
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_empty_content`
- **è¯·æ±‚**: `POST /nacos/v1/cs/configs?dataId=test&group=DEFAULT_GROUP&tenant=public&content=`
- **é¢„æœŸå“åº”**: `200 OK` å’Œ `true`
- **éªŒè¯ç‚¹**: ç©ºå†…å®¹åº”è¢«å…è®¸

#### æµ‹è¯•ç”¨ä¾‹ï¼šç‰¹æ®Šå­—ç¬¦å¤„ç†
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_special_characters`
- **æµ‹è¯•å†…å®¹**: `content=test&special=chars&newline=\n&tab=\t`
- **è¯·æ±‚**: URL ç¼–ç åçš„å†…å®¹
- **é¢„æœŸå“åº”**: `200 OK`
- **éªŒè¯ç‚¹**: ç‰¹æ®Šå­—ç¬¦åº”æ­£ç¡®å­˜å‚¨å’Œæ£€ç´¢

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸­æ–‡å†…å®¹
- **æµ‹è¯•å‡½æ•°å**: `test_publish_config_chinese_content`
- **æµ‹è¯•å†…å®¹**: `content=æµ‹è¯•ä¸­æ–‡å†…å®¹`
- **è¯·æ±‚**: URL ç¼–ç åçš„å†…å®¹
- **é¢„æœŸå“åº”**: `200 OK`
- **éªŒè¯ç‚¹**: ä¸­æ–‡å†…å®¹åº”æ­£ç¡®å­˜å‚¨å’Œæ£€ç´¢

---

## 2. é…ç½®è·å– API (`GET /v1/cs/configs`)

### 2.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šè·å–å­˜åœ¨çš„é…ç½®ï¼ˆæˆåŠŸï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_success`
- **å‰ç½®æ¡ä»¶**:
  - åˆ›å»ºæµ‹è¯•æ•°æ®åº“
  - æ’å…¥æµ‹è¯•é…ç½®ï¼š`dataId=test-config`, `group=DEFAULT_GROUP`, `tenant=public`, `content=test-content`
- **è¯·æ±‚**:
  - æ–¹æ³•: `GET`
  - URI: `/nacos/v1/cs/configs?dataId=test-config&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `test-content`ï¼ˆé…ç½®å†…å®¹ï¼‰
- **éªŒè¯ç‚¹**:
  - å“åº”çŠ¶æ€ç ä¸º 200
  - å“åº”ä½“å†…å®¹ä¸æ’å…¥çš„é…ç½®å†…å®¹ä¸€è‡´

#### æµ‹è¯•ç”¨ä¾‹ï¼šè·å–ä¸å­˜åœ¨çš„é…ç½®ï¼ˆ404ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_not_found`
- **å‰ç½®æ¡ä»¶**: åˆ›å»ºæµ‹è¯•æ•°æ®åº“ï¼ˆä¸æ’å…¥é…ç½®ï¼‰
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs?dataId=non-existent&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `404 Not Found`
  - å“åº”ä½“: ç©ºæˆ–é”™è¯¯æ¶ˆæ¯
- **éªŒè¯ç‚¹**: è¿”å› 404 çŠ¶æ€ç 

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸åŒå‘½åç©ºé—´å’Œ Group
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_different_namespace_and_group`
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥å¤šä¸ªé…ç½®ï¼š
    - `dataId=test1`, `group=DEFAULT_GROUP`, `tenant=public`, `content=content1`
    - `dataId=test1`, `group=custom-group`, `tenant=public`, `content=content2`
    - `dataId=test1`, `group=DEFAULT_GROUP`, `tenant=test-ns`, `content=content3`
- **éªŒè¯ç‚¹**: æ¯ä¸ªç»„åˆéƒ½èƒ½æ­£ç¡®è·å–å¯¹åº”çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šshow=all å‚æ•°ï¼ˆè¿”å›è¯¦ç»†ä¿¡æ¯ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_with_show_all`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs?dataId=test-config&group=DEFAULT_GROUP&tenant=public&show=all`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«é…ç½®è¯¦æƒ…ï¼ˆdataId, group, content, md5, type ç­‰ï¼‰
- **éªŒè¯ç‚¹**: è¿”å›å®Œæ•´çš„é…ç½®ä¿¡æ¯

### 2.2 MD5 éªŒè¯æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šé…ç½® MD5 å€¼æ­£ç¡®æ€§
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_md5_correctness`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®ï¼š`content=test-content`
- **æ­¥éª¤**:
  1. è·å–é…ç½®ï¼ˆshow=allï¼‰
  2. è®¡ç®—å“åº”ä¸­ MD5 å€¼
  3. éªŒè¯ MD5 å€¼ä¸å†…å®¹åŒ¹é…
- **éªŒè¯ç‚¹**: MD5 å€¼æ­£ç¡®ï¼ˆ`md5("test-content")`ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šé…ç½®æ›´æ–°å MD5 å˜åŒ–
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_md5_changes_after_update`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®
- **æ­¥éª¤**:
  1. è·å–é…ç½® MD5ï¼ˆold_md5ï¼‰
  2. æ›´æ–°é…ç½®å†…å®¹
  3. è·å–é…ç½® MD5ï¼ˆnew_md5ï¼‰
  4. éªŒè¯ MD5 å€¼å·²å˜åŒ–
- **éªŒè¯ç‚¹**: `old_md5 != new_md5`

---

## 3. é…ç½®åˆ é™¤ API (`DELETE /v1/cs/configs`)

### 3.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šåˆ é™¤å­˜åœ¨çš„é…ç½®ï¼ˆæˆåŠŸï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_delete_config_success`
- **å‰ç½®æ¡ä»¶**:
  - åˆ›å»ºæµ‹è¯•æ•°æ®åº“
  - æ’å…¥æµ‹è¯•é…ç½®
- **è¯·æ±‚**:
  - æ–¹æ³•: `DELETE`
  - URI: `/nacos/v1/cs/configs?dataId=test-config&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `true`
- **éªŒè¯ç‚¹**:
  - å“åº”çŠ¶æ€ç ä¸º 200
  - æ•°æ®åº“ä¸­é…ç½®å·²åˆ é™¤ï¼ˆå¯é€‰éªŒè¯ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šåˆ é™¤ä¸å­˜åœ¨çš„é…ç½®ï¼ˆ404ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_delete_config_not_found`
- **å‰ç½®æ¡ä»¶**: åˆ›å»ºæµ‹è¯•æ•°æ®åº“ï¼ˆä¸æ’å…¥é…ç½®ï¼‰
- **è¯·æ±‚**: `DELETE /nacos/v1/cs/configs?dataId=non-existent&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `404 Not Found` æˆ– `200 OK`ï¼ˆæ ¹æ®å®ç°ï¼‰
- **éªŒè¯ç‚¹**: æ ¹æ®å®ç°éªŒè¯è¡Œä¸º

#### æµ‹è¯•ç”¨ä¾‹ï¼šåˆ é™¤åé…ç½®å†å²è®°å½•ä¿ç•™
- **æµ‹è¯•å‡½æ•°å**: `test_delete_config_history_preserved`
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥æµ‹è¯•é…ç½®
  - æ›´æ–°é…ç½®ä¸€æ¬¡ï¼ˆç”Ÿæˆå†å²è®°å½•ï¼‰
- **æ­¥éª¤**:
  1. åˆ é™¤é…ç½®
  2. æŸ¥è¯¢é…ç½®å†å²è®°å½•
- **éªŒè¯ç‚¹**: å†å²è®°å½•ä»ç„¶å­˜åœ¨

---

## 4. é…ç½®ç›‘å¬ API (`POST /v1/cs/configs/listener`)

### 4.1 é•¿è½®è¯¢æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šé…ç½®æ— å˜æ›´æ—¶è¶…æ—¶è¿”å›ï¼ˆ30ç§’ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_timeout`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®
- **è¯·æ±‚**:
  - æ–¹æ³•: `POST`
  - URI: `/nacos/v1/cs/configs/listener`
  - Headers: 
    - `Long-Pulling-Timeout: 30000`ï¼ˆ30ç§’ï¼‰
    - `Listening-Configs: test-config+DEFAULT_GROUP+public+<md5>`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: ç©ºæˆ–ç‰¹å®šæ ¼å¼ï¼ˆè¡¨ç¤ºæ— å˜æ›´ï¼‰
  - å“åº”æ—¶é—´: çº¦ 30 ç§’åè¿”å›
- **éªŒè¯ç‚¹**: è¶…æ—¶åè¿”å›ï¼Œæ— é…ç½®å˜æ›´

#### æµ‹è¯•ç”¨ä¾‹ï¼šé…ç½®å˜æ›´æ—¶ç«‹å³è¿”å›
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_change_detected`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®
- **æ­¥éª¤**:
  1. å¯åŠ¨ç›‘å¬è¯·æ±‚ï¼ˆåå°çº¿ç¨‹ï¼‰
  2. æ›´æ–°é…ç½®å†…å®¹
  3. éªŒè¯ç›‘å¬è¯·æ±‚ç«‹å³è¿”å›å˜æ›´ä¿¡æ¯
- **é¢„æœŸå“åº”**: ç«‹å³è¿”å›å˜æ›´çš„é…ç½®ä¿¡æ¯
- **éªŒè¯ç‚¹**: é…ç½®å˜æ›´è¢«åŠæ—¶æ£€æµ‹åˆ°

#### æµ‹è¯•ç”¨ä¾‹ï¼šç›‘å¬å¤šä¸ªé…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_multiple`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
- **è¯·æ±‚**:
  - Headers: `Listening-Configs: config1+DEFAULT_GROUP+public+md5,config2+DEFAULT_GROUP+public+md5`
- **éªŒè¯ç‚¹**: èƒ½åŒæ—¶ç›‘å¬å¤šä¸ªé…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šMD5 å€¼åŒ¹é…å’Œä¸åŒ¹é…çš„æƒ…å†µ
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_md5_match`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®
- **æµ‹è¯•åœºæ™¯**:
  1. MD5 åŒ¹é…ï¼šä½¿ç”¨æ­£ç¡®çš„ MD5ï¼Œåº”è¶…æ—¶è¿”å›
  2. MD5 ä¸åŒ¹é…ï¼šä½¿ç”¨é”™è¯¯çš„ MD5ï¼Œåº”ç«‹å³è¿”å›å˜æ›´
- **éªŒè¯ç‚¹**: MD5 åŒ¹é…é€»è¾‘æ­£ç¡®

### 4.2 å‚æ•°éªŒè¯æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ— æ•ˆçš„ Listening-Configs æ ¼å¼
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_invalid_format`
- **è¯·æ±‚**: `Listening-Configs: invalid-format`
- **é¢„æœŸå“åº”**: `400 Bad Request`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

#### æµ‹è¯•ç”¨ä¾‹ï¼šLong-Pulling-Timeout å‚æ•°
- **æµ‹è¯•å‡½æ•°å**: `test_listen_config_timeout_parameter`
- **æµ‹è¯•åœºæ™¯**:
  1. `Long-Pulling-Timeout: 1000`ï¼ˆ1ç§’ï¼‰
  2. `Long-Pulling-Timeout: 60000`ï¼ˆ60ç§’ï¼‰
  3. `Long-Pulling-Timeout: 0`ï¼ˆæ— æ•ˆå€¼ï¼‰
- **éªŒè¯ç‚¹**: è¶…æ—¶å‚æ•°æ­£ç¡®ç”Ÿæ•ˆ

---

## 5. é…ç½®ç›‘å¬è€…æŸ¥è¯¢ API (`GET /v1/cs/configs/listener`)

### 5.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŸ¥è¯¢é…ç½®çš„ç›‘å¬è€…åˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_list_listeners_success`
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥æµ‹è¯•é…ç½®
  - å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªç›‘å¬è¯·æ±‚
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/listener?dataId=test-config&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«ç›‘å¬è€…åˆ—è¡¨ï¼ˆIPã€ç«¯å£ç­‰ï¼‰
- **éªŒè¯ç‚¹**: è¿”å›æ­£ç¡®çš„ç›‘å¬è€…ä¿¡æ¯

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ— ç›‘å¬è€…æ—¶è¿”å›ç©ºåˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_list_listeners_empty`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®ï¼ˆæ— ç›‘å¬è€…ï¼‰
- **è¯·æ±‚**: åŒä¸Š
- **é¢„æœŸå“åº”**: ç©ºåˆ—è¡¨æˆ–ç‰¹å®šæ ¼å¼
- **éªŒè¯ç‚¹**: è¿”å›ç©ºåˆ—è¡¨

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¤šä¸ªå®¢æˆ·ç«¯ç›‘å¬åŒä¸€é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_list_listeners_multiple_clients`
- **å‰ç½®æ¡ä»¶**: å¯åŠ¨å¤šä¸ªç›‘å¬è¯·æ±‚
- **éªŒè¯ç‚¹**: è¿”å›æ‰€æœ‰ç›‘å¬è€…ä¿¡æ¯

---

## 6. é…ç½®å†å²è®°å½• API (`GET /v1/cs/history`)

### 6.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šè·å–é…ç½®å†å²è®°å½•åˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_history_success`
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥æµ‹è¯•é…ç½®
  - æ›´æ–°é…ç½®å¤šæ¬¡ï¼ˆç”Ÿæˆå†å²è®°å½•ï¼‰
- **è¯·æ±‚**: `GET /nacos/v1/cs/history?dataId=test-config&group=DEFAULT_GROUP&tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«å†å²è®°å½•åˆ—è¡¨
- **éªŒè¯ç‚¹**: è¿”å›å†å²è®°å½•åˆ—è¡¨

#### æµ‹è¯•ç”¨ä¾‹ï¼šå†å²è®°å½•æŒ‰æ—¶é—´æ’åº
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_history_sorted`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šæ¡å†å²è®°å½•
- **éªŒè¯ç‚¹**: å†å²è®°å½•æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šåˆ†é¡µå‚æ•°ï¼ˆpageNoã€pageSizeï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_history_pagination`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šæ¡å†å²è®°å½•ï¼ˆ>10æ¡ï¼‰
- **æµ‹è¯•åœºæ™¯**:
  1. `pageNo=1&pageSize=10`ï¼šè¿”å›å‰10æ¡
  2. `pageNo=2&pageSize=10`ï¼šè¿”å›ç¬¬11-20æ¡
- **éªŒè¯ç‚¹**: åˆ†é¡µåŠŸèƒ½æ­£ç¡®

#### æµ‹è¯•ç”¨ä¾‹ï¼šå†å²è®°å½•è¯¦æƒ…
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_history_details`
- **éªŒè¯ç‚¹**: æ¯æ¡å†å²è®°å½•åŒ…å«ï¼š
  - æ“ä½œç±»å‹ï¼ˆINSERTã€UPDATEã€DELETEï¼‰
  - æ“ä½œäººï¼ˆusernameï¼‰
  - æ“ä½œæ—¶é—´ï¼ˆgmt_createï¼‰
  - é…ç½®å†…å®¹ï¼ˆcontentï¼‰
  - MD5 å€¼

---

## 7. é…ç½®ç›®å½• API (`GET /v1/cs/configs/catalog`)

### 7.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šè·å–é…ç½®ç›®å½•ï¼ˆæœç´¢åŠŸèƒ½ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_success`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«é…ç½®åˆ—è¡¨
- **éªŒè¯ç‚¹**: è¿”å›é…ç½®ç›®å½•

#### æµ‹è¯•ç”¨ä¾‹ï¼šç²¾ç¡®æœç´¢ï¼ˆsearch=accurateï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_accurate_search`
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public&search=accurate&dataId=test-config`
- **éªŒè¯ç‚¹**: åªè¿”å›å®Œå…¨åŒ¹é…çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ¨¡ç³Šæœç´¢ï¼ˆsearch=blurï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_blur_search`
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public&search=blur&dataId=test`
- **éªŒè¯ç‚¹**: è¿”å›åŒ…å« "test" çš„æ‰€æœ‰é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰åº”ç”¨åç§°è¿‡æ»¤
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_filter_by_app`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¸¦ appName çš„é…ç½®
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public&appName=test-app`
- **éªŒè¯ç‚¹**: åªè¿”å›æŒ‡å®šåº”ç”¨çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é…ç½®ç±»å‹è¿‡æ»¤
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_filter_by_type`
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public&types=json`
- **éªŒè¯ç‚¹**: åªè¿”å›æŒ‡å®šç±»å‹çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šåˆ†é¡µåŠŸèƒ½
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_catalog_pagination`
- **è¯·æ±‚**: `GET /nacos/v1/cs/configs/catalog?tenant=public&pageNo=1&pageSize=10`
- **éªŒè¯ç‚¹**: åˆ†é¡µåŠŸèƒ½æ­£ç¡®

---

## 8. é…ç½®å›æ»š API (`POST /v3/console/cs/config/rollback`)

### 8.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šå›æ»šåˆ°æŒ‡å®šå†å²ç‰ˆæœ¬
- **æµ‹è¯•å‡½æ•°å**: `test_rollback_config_success`
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥æµ‹è¯•é…ç½®
  - æ›´æ–°é…ç½®ï¼ˆç”Ÿæˆå†å²è®°å½•ï¼‰
  - è·å–å†å²è®°å½• ID
- **è¯·æ±‚**:
  - æ–¹æ³•: `POST`
  - URI: `/nacos/v3/console/cs/config/rollback`
  - Body: JSON `{"dataId": "test-config", "group": "DEFAULT_GROUP", "tenant": "public", "id": <history_id>}`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `true` æˆ–æˆåŠŸæ¶ˆæ¯
- **éªŒè¯ç‚¹**: é…ç½®å·²å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬

#### æµ‹è¯•ç”¨ä¾‹ï¼šå›æ»šåé…ç½®å†…å®¹æ­£ç¡®
- **æµ‹è¯•å‡½æ•°å**: `test_rollback_config_content_correct`
- **æ­¥éª¤**:
  1. æ’å…¥é…ç½®ï¼š`content=version1`
  2. æ›´æ–°é…ç½®ï¼š`content=version2`
  3. å›æ»šåˆ°ç‰ˆæœ¬1
  4. è·å–é…ç½®
- **éªŒè¯ç‚¹**: é…ç½®å†…å®¹ä¸º "version1"

#### æµ‹è¯•ç”¨ä¾‹ï¼šå›æ»šåå†å²è®°å½•æ›´æ–°
- **æµ‹è¯•å‡½æ•°å**: `test_rollback_config_history_updated`
- **éªŒè¯ç‚¹**: å›æ»šæ“ä½œç”Ÿæˆæ–°çš„å†å²è®°å½•

#### æµ‹è¯•ç”¨ä¾‹ï¼šå›æ»šä¸å­˜åœ¨çš„ç‰ˆæœ¬ï¼ˆé”™è¯¯å¤„ç†ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_rollback_config_invalid_id`
- **è¯·æ±‚**: ä½¿ç”¨ä¸å­˜åœ¨çš„å†å²è®°å½• ID
- **é¢„æœŸå“åº”**: `404 Not Found` æˆ– `400 Bad Request`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

---

## 9. Console API é…ç½®ç›‘å¬æŸ¥è¯¢ (`GET /v3/console/cs/config/listener`)

### 9.1 æŒ‰é…ç½®æŸ¥è¯¢ç›‘å¬è€…

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é…ç½®æŸ¥è¯¢ç›‘å¬è€…åˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_console_list_listeners_by_config`
- **API**: `GET /v3/console/cs/config/listener`
- **å‚æ•°**: 
  - `dataId`: é…ç½® IDï¼ˆå¿…éœ€ï¼‰
  - `groupName`: é…ç½®ç»„ï¼ˆå¿…éœ€ï¼‰
  - `namespaceId`: å‘½åç©ºé—´ IDï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º publicï¼‰
  - `aggregation`: æ˜¯å¦èšåˆï¼ˆå¯é€‰ï¼Œé»˜è®¤ falseï¼‰
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥æµ‹è¯•é…ç½®
  - å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªç›‘å¬è¯·æ±‚ï¼ˆæ¨¡æ‹Ÿå®¢æˆ·ç«¯ç›‘å¬ï¼‰
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼
    ```json
    {
      "queryType": "config",
      "listenersStatus": {
        "127.0.0.1:8080": "md5-value-1",
        "127.0.0.1:8081": "md5-value-2"
      }
    }
    ```
- **éªŒè¯ç‚¹**: 
  - è¿”å›æŒ‡å®šé…ç½®çš„æ‰€æœ‰ç›‘å¬è€… IP åŠå…¶ MD5 å€¼
  - `queryType` ä¸º "config"

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é…ç½®æŸ¥è¯¢ç›‘å¬è€…ï¼ˆæ— ç›‘å¬è€…ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_console_list_listeners_by_config_empty`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®ï¼ˆæ— ç›‘å¬è€…ï¼‰
- **é¢„æœŸå“åº”**: 
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `{ "queryType": "config", "listenersStatus": {} }`
- **éªŒè¯ç‚¹**: è¿”å›ç©ºçš„ `listenersStatus` å¯¹è±¡

#### æµ‹è¯•ç”¨ä¾‹ï¼šä¸åŒå‘½åç©ºé—´çš„ç›‘å¬è€…éš”ç¦»
- **æµ‹è¯•å‡½æ•°å**: `test_console_list_listeners_by_config_different_namespace`
- **å‰ç½®æ¡ä»¶**:
  - åˆ›å»ºä¸¤ä¸ªå‘½åç©ºé—´ï¼š`public` å’Œ `test-ns`
  - åœ¨ä¸¤ä¸ªå‘½åç©ºé—´åˆ›å»ºç›¸åŒ dataId çš„é…ç½®
  - åœ¨ä¸åŒå‘½åç©ºé—´å¯åŠ¨ç›‘å¬è¯·æ±‚
- **éªŒè¯ç‚¹**: ä¸åŒå‘½åç©ºé—´çš„ç›‘å¬è€…ç›¸äº’éš”ç¦»

### 9.2 æŒ‰ IP æŸ¥è¯¢ç›‘å¬è€…

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰ IP æŸ¥è¯¢ç›‘å¬è€…åˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_console_list_listeners_by_ip`
- **API**: `GET /v3/console/cs/config/listener/ip`
- **å‚æ•°**: 
  - `ip`: å®¢æˆ·ç«¯ IPï¼ˆå¿…éœ€ï¼‰
  - `namespaceId`: å‘½åç©ºé—´ IDï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º publicï¼‰
  - `aggregation`: æ˜¯å¦èšåˆï¼ˆå¯é€‰ï¼Œé»˜è®¤ falseï¼‰
- **å‰ç½®æ¡ä»¶**:
  - æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
  - ä½¿ç”¨æŒ‡å®š IP å¯åŠ¨å¤šä¸ªç›‘å¬è¯·æ±‚
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼
    ```json
    {
      "queryType": "ip",
      "listenersStatus": {
        "test-config-1+DEFAULT_GROUP": "md5-value-1",
        "test-config-2+DEFAULT_GROUP": "md5-value-2"
      }
    }
    ```
- **éªŒè¯ç‚¹**: 
  - è¿”å›æŒ‡å®š IP ç›‘å¬çš„æ‰€æœ‰é…ç½®åŠå…¶ MD5 å€¼
  - `queryType` ä¸º "ip"
  - é…ç½®æ ‡è¯†æ ¼å¼ä¸º `dataId+group`

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰ IP æŸ¥è¯¢ç›‘å¬è€…ï¼ˆæ— ç›‘å¬è€…ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_console_list_listeners_by_ip_empty`
- **å‰ç½®æ¡ä»¶**: æ’å…¥æµ‹è¯•é…ç½®ï¼ˆæŒ‡å®š IP æ— ç›‘å¬è€…ï¼‰
- **é¢„æœŸå“åº”**: 
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: `{ "queryType": "ip", "listenersStatus": {} }`
- **éªŒè¯ç‚¹**: è¿”å›ç©ºçš„ `listenersStatus` å¯¹è±¡

---

## 10. é…ç½®å¯¼å‡º API (`GET /v1/cs/configs?export=true`)

### 10.1 åŸºç¡€å¯¼å‡ºåŠŸèƒ½

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å‡ºé…ç½®ï¼ˆZIP æ ¼å¼ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_export_config`
- **API**: `GET /v1/cs/configs?export=true`
- **å‚æ•°**: 
  - `dataId`: é…ç½® IDï¼ˆå¯é€‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰
  - `group`: é…ç½®ç»„ï¼ˆå¯é€‰ï¼‰
  - `tenant`: å‘½åç©ºé—´ IDï¼ˆå¯é€‰ï¼‰
  - `appName`: åº”ç”¨åç§°ï¼ˆå¯é€‰ï¼‰
  - `ids`: é…ç½® ID åˆ—è¡¨ï¼Œé€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼Œå¦‚ï¼š`1,2,3`ï¼‰
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - Content-Type: `application/zip`
  - å“åº”ä½“: ZIP æ–‡ä»¶ï¼ŒåŒ…å«é…ç½®å†…å®¹
- **éªŒè¯ç‚¹**: 
  - è¿”å› ZIP æ–‡ä»¶
  - ZIP æ–‡ä»¶åŒ…å«é…ç½®å†…å®¹
  - å¯ä»¥è§£å‹å¹¶è¯»å–é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å‡ºé…ç½® V2ï¼ˆåŒ…å«å…ƒæ•°æ®ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_export_config_v2`
- **API**: `GET /v1/cs/configs?exportV2=true`
- **å‚æ•°**: åŒä¸Š
- **é¢„æœŸå“åº”**: 
  - çŠ¶æ€ç : `200 OK`
  - Content-Type: `application/zip`
  - å“åº”ä½“: ZIP æ–‡ä»¶ï¼ŒåŒ…å«é…ç½®å†…å®¹å’Œå…ƒæ•°æ® YAML
- **éªŒè¯ç‚¹**: 
  - ZIP æ–‡ä»¶åŒ…å«é…ç½®å†…å®¹
  - ZIP æ–‡ä»¶åŒ…å« `metadata.yaml` å…ƒæ•°æ®æ–‡ä»¶
  - å…ƒæ•°æ®åŒ…å«é…ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼ˆdataId, group, type, appName ç­‰ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å‡ºæŒ‡å®š ID çš„é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_export_config_by_ids`
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
- **è¯·æ±‚**: `GET /v1/cs/configs?export=true&ids=1,2,3`
- **éªŒè¯ç‚¹**: åªå¯¼å‡ºæŒ‡å®š ID çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å‡ºç©ºç»“æœ
- **æµ‹è¯•å‡½æ•°å**: `test_export_config_empty`
- **å‰ç½®æ¡ä»¶**: ä¸æ’å…¥é…ç½®ï¼Œæˆ–ä½¿ç”¨ä¸åŒ¹é…çš„è¿‡æ»¤æ¡ä»¶
- **éªŒè¯ç‚¹**: è¿”å›ç©º ZIP æ–‡ä»¶æˆ–é”™è¯¯

---

## 11. é…ç½®å¯¼å…¥ API (`POST /v1/cs/configs?import=true`)

### 11.1 åŸºç¡€å¯¼å…¥åŠŸèƒ½

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥å¹¶å‘å¸ƒé…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_import_and_publish_config`
- **API**: `POST /v1/cs/configs?import=true`
- **å‚æ•°**: 
  - `src_user`: æ“ä½œç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
  - `namespace`: ç›®æ ‡å‘½åç©ºé—´ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º publicï¼‰
  - `policy`: å†²çªå¤„ç†ç­–ç•¥ï¼ˆå¯é€‰ï¼Œå¦‚ï¼š`ABORT`, `SKIP`, `OVERWRITE`ï¼‰
- **è¯·æ±‚ä½“**: MultipartFileï¼ˆZIP æ–‡ä»¶ï¼‰
- **å‰ç½®æ¡ä»¶**: å‡†å¤‡ ZIP æ–‡ä»¶ï¼ŒåŒ…å«é…ç½®å†…å®¹
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼
    ```json
    {
      "code": "200",
      "data": {
        "succCount": 2,
        "skipCount": 0,
        "failCount": 0
      }
    }
    ```
- **éªŒè¯ç‚¹**: 
  - é…ç½®å·²å¯¼å…¥å¹¶å‘å¸ƒ
  - è¿”å›å¯¼å…¥ç»Ÿè®¡ä¿¡æ¯

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥å¹¶å‘å¸ƒé…ç½® V2ï¼ˆæ”¯æŒå…ƒæ•°æ®ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_import_and_publish_config_v2`
- **API**: `POST /v1/cs/configs?import=true`
- **è¯·æ±‚ä½“**: MultipartFileï¼ˆZIP æ–‡ä»¶ï¼ŒåŒ…å« `metadata.yaml`ï¼‰
- **éªŒè¯ç‚¹**: 
  - é…ç½®å·²å¯¼å…¥å¹¶å‘å¸ƒ
  - å…ƒæ•°æ®ä¿¡æ¯å·²æ­£ç¡®åº”ç”¨

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥å†²çªå¤„ç†ç­–ç•¥ï¼ˆABORTï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_import_config_policy_abort`
- **å‰ç½®æ¡ä»¶**: å·²å­˜åœ¨åŒåé…ç½®
- **è¯·æ±‚**: `policy=ABORT`
- **éªŒè¯ç‚¹**: å¯¼å…¥å¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥å†²çªå¤„ç†ç­–ç•¥ï¼ˆSKIPï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_import_config_policy_skip`
- **å‰ç½®æ¡ä»¶**: å·²å­˜åœ¨åŒåé…ç½®
- **è¯·æ±‚**: `policy=SKIP`
- **éªŒè¯ç‚¹**: è·³è¿‡å·²å­˜åœ¨çš„é…ç½®ï¼Œç»§ç»­å¯¼å…¥å…¶ä»–é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥å†²çªå¤„ç†ç­–ç•¥ï¼ˆOVERWRITEï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_import_config_policy_overwrite`
- **å‰ç½®æ¡ä»¶**: å·²å­˜åœ¨åŒåé…ç½®
- **è¯·æ±‚**: `policy=OVERWRITE`
- **éªŒè¯ç‚¹**: è¦†ç›–å·²å­˜åœ¨çš„é…ç½®

#### æµ‹è¯•ç”¨ä¾‹ï¼šå¯¼å…¥æ— æ•ˆ ZIP æ–‡ä»¶
- **æµ‹è¯•å‡½æ•°å**: `test_import_config_invalid_zip`
- **è¯·æ±‚ä½“**: æ— æ•ˆçš„ ZIP æ–‡ä»¶æˆ–é ZIP æ–‡ä»¶
- **é¢„æœŸå“åº”**: `400 Bad Request`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

---

## 12. é…ç½®å…‹éš† API (`POST /v1/cs/configs?clone=true`)

### 12.1 åŸºç¡€å…‹éš†åŠŸèƒ½

#### æµ‹è¯•ç”¨ä¾‹ï¼šå…‹éš†é…ç½®ï¼ˆåŒå‘½åç©ºé—´ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_clone_config`
- **API**: `POST /v1/cs/configs?clone=true`
- **å‚æ•°**: 
  - `src_user`: æ“ä½œç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
  - `tenant`: å‘½åç©ºé—´ IDï¼ˆå¿…éœ€ï¼‰
  - `policy`: å†²çªå¤„ç†ç­–ç•¥ï¼ˆå¯é€‰ï¼Œå¦‚ï¼š`ABORT`, `SKIP`, `OVERWRITE`ï¼‰
- **è¯·æ±‚ä½“**: JSON æ ¼å¼
  ```json
  [
    {
      "cfgId": 1,
      "dataId": "new-data-id",
      "group": "new-group"
    }
  ]
  ```
- **å‰ç½®æ¡ä»¶**: 
  - æ’å…¥æºé…ç½®ï¼ˆID=1ï¼‰
  - è·å–é…ç½®çš„å®Œæ•´ä¿¡æ¯
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON `{ "code": "200", "data": "true" }`
- **éªŒè¯ç‚¹**: 
  - é…ç½®å·²å…‹éš†åˆ°æ–°çš„ dataId/group
  - å…‹éš†çš„é…ç½®å†…å®¹ä¸æºé…ç½®ä¸€è‡´
  - ç”Ÿæˆæ–°çš„é…ç½®è®°å½•ï¼ˆä¸æ˜¯æ›´æ–°ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šå…‹éš†å¤šä¸ªé…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_clone_config_multiple`
- **è¯·æ±‚ä½“**: åŒ…å«å¤šä¸ªé…ç½®çš„ JSON æ•°ç»„
- **éªŒè¯ç‚¹**: æ‰€æœ‰é…ç½®éƒ½æˆåŠŸå…‹éš†

#### æµ‹è¯•ç”¨ä¾‹ï¼šå…‹éš†é…ç½®å†²çªå¤„ç†
- **æµ‹è¯•å‡½æ•°å**: `test_clone_config_conflict`
- **å‰ç½®æ¡ä»¶**: ç›®æ ‡ dataId/group å·²å­˜åœ¨é…ç½®
- **æµ‹è¯•åœºæ™¯**:
  1. `policy=ABORT`: å…‹éš†å¤±è´¥
  2. `policy=SKIP`: è·³è¿‡å·²å­˜åœ¨çš„é…ç½®
  3. `policy=OVERWRITE`: è¦†ç›–å·²å­˜åœ¨çš„é…ç½®
- **éªŒè¯ç‚¹**: æ ¹æ®ç­–ç•¥æ­£ç¡®å¤„ç†å†²çª

#### æµ‹è¯•ç”¨ä¾‹ï¼šå…‹éš†ä¸å­˜åœ¨çš„é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_clone_config_not_found`
- **è¯·æ±‚ä½“**: ä½¿ç”¨ä¸å­˜åœ¨çš„ `cfgId`
- **é¢„æœŸå“åº”**: `404 Not Found` æˆ– `400 Bad Request`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

---

## 13. Beta/Gray é…ç½® API

### 13.1 Beta é…ç½®ç®¡ç†

#### æµ‹è¯•ç”¨ä¾‹ï¼šå‘å¸ƒ Beta é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_publish_beta_config`
- **API**: `POST /v1/cs/configs?beta=true`
- **å‚æ•°**: 
  - `dataId`, `group`, `tenant`: æ ‡å‡†å‚æ•°
  - `content`: Beta é…ç½®å†…å®¹
  - `betaIps`: Beta IP åˆ—è¡¨ï¼ˆå¯é€‰ï¼Œé€—å·åˆ†éš”ï¼‰
- **é¢„æœŸå“åº”**: `200 OK`
- **éªŒè¯ç‚¹**: Beta é…ç½®å·²åˆ›å»º

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŸ¥è¯¢ Beta é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_query_beta_config`
- **API**: `GET /v1/cs/configs?beta=true&dataId=xxx&group=xxx&tenant=xxx`
- **é¢„æœŸå“åº”**: 
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: Beta é…ç½®å†…å®¹
- **éªŒè¯ç‚¹**: è¿”å› Beta é…ç½®å†…å®¹

#### æµ‹è¯•ç”¨ä¾‹ï¼šåœæ­¢ Beta é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_stop_beta_config`
- **API**: `DELETE /v1/cs/configs?beta=true&dataId=xxx&group=xxx&tenant=xxx`
- **é¢„æœŸå“åº”**: 
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON `{ "code": "200", "data": "true" }`
- **éªŒè¯ç‚¹**: Beta é…ç½®å·²åˆ é™¤

### 13.2 Gray é…ç½®ç®¡ç†

#### æµ‹è¯•ç”¨ä¾‹ï¼šå‘å¸ƒ Gray é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_publish_gray_config`
- **API**: `POST /v1/cs/configs?gray=true`
- **å‚æ•°**: 
  - `dataId`, `group`, `tenant`: æ ‡å‡†å‚æ•°
  - `content`: Gray é…ç½®å†…å®¹
  - `grayIps`: Gray IP åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
- **é¢„æœŸå“åº”**: `200 OK`
- **éªŒè¯ç‚¹**: Gray é…ç½®å·²åˆ›å»º

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŸ¥è¯¢ Gray é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_query_gray_config`
- **API**: `GET /v1/cs/configs?gray=true&dataId=xxx&group=xxx&tenant=xxx`
- **éªŒè¯ç‚¹**: è¿”å› Gray é…ç½®å†…å®¹

---

## 14. æ‰¹é‡åˆ é™¤é…ç½® API (`DELETE /v3/console/cs/config/batchDelete`)

### 14.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ‰¹é‡åˆ é™¤é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_batch_delete_configs`
- **API**: `DELETE /v3/console/cs/config/batchDelete`
- **å‚æ•°**: 
  - `ids`: é…ç½® ID åˆ—è¡¨ï¼Œé€—å·åˆ†éš”ï¼ˆå¿…éœ€ï¼Œå¦‚ï¼š`1,2,3`ï¼‰
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªæµ‹è¯•é…ç½®
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON `{ "code": "0", "data": true }`
- **éªŒè¯ç‚¹**: 
  - æ‰€æœ‰æŒ‡å®š ID çš„é…ç½®å·²åˆ é™¤
  - è¿”å›æˆåŠŸçŠ¶æ€

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ‰¹é‡åˆ é™¤éƒ¨åˆ†ä¸å­˜åœ¨çš„é…ç½®
- **æµ‹è¯•å‡½æ•°å**: `test_batch_delete_configs_partial`
- **å‰ç½®æ¡ä»¶**: åªæ’å…¥éƒ¨åˆ†é…ç½®ï¼ˆå¦‚ ID=1,2ï¼Œä½†è¯·æ±‚åˆ é™¤ 1,2,3ï¼‰
- **éªŒè¯ç‚¹**: 
  - å­˜åœ¨çš„é…ç½®å·²åˆ é™¤
  - ä¸å­˜åœ¨çš„é…ç½®ä¸å½±å“æ“ä½œï¼ˆæˆ–è¿”å›é”™è¯¯ï¼‰

#### æµ‹è¯•ç”¨ä¾‹ï¼šæ‰¹é‡åˆ é™¤ç©ºåˆ—è¡¨
- **æµ‹è¯•å‡½æ•°å**: `test_batch_delete_configs_empty`
- **è¯·æ±‚**: `ids=`ï¼ˆç©ºï¼‰
- **é¢„æœŸå“åº”**: `400 Bad Request`
- **éªŒè¯ç‚¹**: è¿”å›é”™è¯¯çŠ¶æ€ç 

---

## 15. é…ç½®æœç´¢å¢å¼º API (`GET /v3/console/cs/config/searchDetail`)

### 15.1 æŒ‰å†…å®¹æœç´¢

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é…ç½®å†…å®¹æœç´¢ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_list_by_content`
- **API**: `GET /v3/console/cs/config/searchDetail`
- **å‚æ•°**: 
  - `configDetail`: é…ç½®å†…å®¹å…³é”®è¯ï¼ˆå¿…éœ€ï¼‰
  - `search`: æœç´¢æ¨¡å¼ï¼ˆ`blur` æˆ– `accurate`ï¼‰
  - `dataId`, `groupName`, `namespaceId`: è¿‡æ»¤æ¡ä»¶ï¼ˆå¯é€‰ï¼‰
  - `pageNo`, `pageSize`: åˆ†é¡µå‚æ•°ï¼ˆå¯é€‰ï¼‰
- **å‰ç½®æ¡ä»¶**: æ’å…¥å¤šä¸ªåŒ…å«ç‰¹å®šå†…å®¹çš„é…ç½®
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«åŒ¹é…çš„é…ç½®åˆ—è¡¨
- **éªŒè¯ç‚¹**: 
  - è¿”å›åŒ…å«å…³é”®è¯çš„é…ç½®
  - åˆ†é¡µåŠŸèƒ½æ­£ç¡®

#### æµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é…ç½®å†…å®¹ç²¾ç¡®æœç´¢
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_list_by_content_accurate`
- **è¯·æ±‚**: `search=accurate&configDetail=exact-content`
- **éªŒè¯ç‚¹**: åªè¿”å›å®Œå…¨åŒ¹é…çš„é…ç½®

---

## 16. é…ç½®é«˜çº§ä¿¡æ¯ API (`GET /v1/cs/configs?show=all`)

### 16.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼šè·å–é…ç½®é«˜çº§ä¿¡æ¯
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_advance_info`
- **API**: `GET /v1/cs/configs?show=all&dataId=xxx&group=xxx&tenant=xxx`
- **é¢„æœŸå“åº”**:
  - çŠ¶æ€ç : `200 OK`
  - å“åº”ä½“: JSON æ ¼å¼ï¼ŒåŒ…å«å®Œæ•´é…ç½®ä¿¡æ¯
    ```json
    {
      "dataId": "test-config",
      "group": "DEFAULT_GROUP",
      "content": "test-content",
      "md5": "md5-value",
      "type": "text",
      "appName": "test-app",
      "createTime": "2025-01-27T10:00:00",
      "modifyTime": "2025-01-27T10:00:00",
      "createUser": "nacos",
      "modifyUser": "nacos"
    }
    ```
- **éªŒè¯ç‚¹**: 
  - è¿”å›é…ç½®çš„å®Œæ•´ä¿¡æ¯
  - åŒ…å«åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€åˆ›å»ºäººã€ä¿®æ”¹äººç­‰å­—æ®µ
  - MD5 å€¼æ­£ç¡®

#### æµ‹è¯•ç”¨ä¾‹ï¼šé…ç½®é«˜çº§ä¿¡æ¯å­—æ®µå®Œæ•´æ€§
- **æµ‹è¯•å‡½æ•°å**: `test_get_config_advance_info_complete`
- **éªŒè¯ç‚¹**: æ‰€æœ‰å­—æ®µéƒ½å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®

---

## ğŸ“ æµ‹è¯•å®ç°æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•æ•°æ®å‡†å¤‡**:
   - ä½¿ç”¨ `TestDatabase::new()` åˆ›å»ºæµ‹è¯•æ•°æ®åº“
   - ä½¿ç”¨ `insert_test_config()` æ’å…¥æµ‹è¯•é…ç½®
   - ä½¿ç”¨ `insert_test_namespace()` æ’å…¥æµ‹è¯•å‘½åç©ºé—´

2. **è¯·æ±‚æ„å»º**:
   - ä½¿ç”¨ `Request::builder()` æ„å»ºè¯·æ±‚
   - æ³¨æ„ URL ç¼–ç ï¼ˆç‰¹åˆ«æ˜¯ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦ï¼‰
   - è®¾ç½®æ­£ç¡®çš„ Content-Type å¤´

3. **å“åº”éªŒè¯**:
   - éªŒè¯çŠ¶æ€ç 
   - éªŒè¯å“åº”ä½“å†…å®¹
   - å¯é€‰ï¼šéªŒè¯æ•°æ®åº“çŠ¶æ€

4. **æ¸…ç†**:
   - ä½¿ç”¨ `test_db.cleanup()` æ¸…ç†æµ‹è¯•æ•°æ®
   - æˆ–ä¾èµ– `Drop` trait è‡ªåŠ¨æ¸…ç†

5. **å¼‚æ­¥æµ‹è¯•**:
   - æ‰€æœ‰æµ‹è¯•å‡½æ•°ä½¿ç”¨ `#[tokio::test]`
   - ä½¿ç”¨ `await` å¤„ç†å¼‚æ­¥æ“ä½œ

---

**æœ€åæ›´æ–°**: 2025-01-27ï¼ˆå‚è€ƒ Nacos develop é¡¹ç›®è¡¥å……ç¼ºå¤±æµ‹è¯•ç”¨ä¾‹ï¼‰

