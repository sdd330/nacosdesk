# 使用指南

本文档介绍如何使用 Nacos Desktop 应用。

## 📋 目录

- [快速开始](#快速开始)
- [配置管理](#配置管理)
- [服务管理](#服务管理)
- [命名空间管理](#命名空间管理)
- [API 服务器](#api-服务器)
- [设置中心](#设置中心)
- [常见问题](#常见问题)

---

## 快速开始

### 1. 启动应用

1. 下载并安装 Nacos Desktop
2. 启动应用
3. 首次启动会提示初始化密码，设置密码后即可登录

### 2. 登录

- **默认用户名**: `nacos`
- **默认密码**: `nacos`（首次启动后需要修改）

### 3. 创建命名空间（可选）

1. 进入「命名空间管理」
2. 点击「新建命名空间」
3. 填写命名空间信息并保存

---

## 配置管理

### 创建配置

1. 进入「配置管理」
2. 选择命名空间（默认为 `public`）
3. 点击「新建配置」
4. 填写配置信息：
   - **Data ID**: 配置的唯一标识
   - **Group**: 配置组（默认为 `DEFAULT_GROUP`）
   - **配置格式**: 选择配置类型（TEXT、JSON、YAML、XML、Properties 等）
   - **配置内容**: 输入配置内容
5. 点击「发布」保存配置

### 编辑配置

1. 在配置列表中点击配置的「编辑」按钮
2. 修改配置内容
3. 点击「发布」保存更改

### 删除配置

1. 在配置列表中点击配置的「删除」按钮
2. 确认删除操作

### 查看配置历史

1. 在配置列表中点击配置的「历史版本」按钮
2. 查看配置的历史记录
3. 可以对比不同版本的差异
4. 可以回滚到指定版本

### 配置监听查询

1. 进入「配置管理」→「监听查询」
2. 选择查询方式：
   - **按配置查询**: 输入 Data ID 和 Group，查询监听该配置的客户端
   - **按 IP 查询**: 输入客户端 IP，查询该客户端监听的所有配置

### 配置导入导出

**导出配置**:
1. 在配置列表中选中要导出的配置（可选）
2. 点击「导出」按钮
3. 选择导出格式（V1 或 V2）
4. 下载 ZIP 文件

**导入配置**:
1. 点击「导入」按钮
2. 选择 ZIP 文件
3. 选择冲突处理策略（终止/跳过/覆盖）
4. 确认导入

---

## 服务管理

### 查看服务列表

1. 进入「服务管理」
2. 选择命名空间（默认为 `public`）
3. 查看服务列表，包括：
   - 服务名称
   - 组名
   - 集群数
   - 实例数
   - 健康实例数

### 查看服务详情

1. 在服务列表中点击服务名称
2. 查看服务详情，包括：
   - 服务基本信息
   - 实例列表
   - 集群信息
   - 订阅者列表

### 创建服务

1. 进入「服务管理」
2. 点击「新建服务」
3. 填写服务信息：
   - **服务名**: 服务的唯一标识
   - **组名**: 服务组（默认为 `DEFAULT_GROUP`）
   - **保护阈值**: 服务保护阈值（0.0-1.0）
4. 点击「创建」保存服务

### 管理服务实例

**注册实例**:
1. 在服务详情页面点击「注册实例」
2. 填写实例信息：
   - **IP**: 实例 IP 地址
   - **端口**: 实例端口
   - **权重**: 实例权重（0.0-1.0）
   - **健康状态**: 是否健康
   - **启用状态**: 是否启用
3. 点击「注册」保存实例

**更新实例**:
1. 在实例列表中点击实例的「编辑」按钮
2. 修改实例信息
3. 点击「更新」保存更改

**删除实例**:
1. 在实例列表中点击实例的「删除」按钮
2. 确认删除操作

### 查看订阅者列表

1. 在服务详情页面点击「订阅者」标签
2. 查看服务的订阅者列表，包括：
   - 客户端 IP
   - 客户端端口
   - Agent 类型
   - 应用名称

---

## 命名空间管理

### 创建命名空间

1. 进入「命名空间管理」
2. 点击「新建命名空间」
3. 填写命名空间信息：
   - **命名空间 ID**: 命名空间的唯一标识（可选，系统自动生成）
   - **命名空间名称**: 命名空间的显示名称
   - **描述**: 命名空间的描述信息
4. 点击「创建」保存命名空间

### 编辑命名空间

1. 在命名空间列表中点击命名空间的「编辑」按钮
2. 修改命名空间信息
3. 点击「保存」保存更改

### 删除命名空间

1. 在命名空间列表中点击命名空间的「删除」按钮
2. 确认删除操作

**注意**: 删除命名空间会同时删除该命名空间下的所有配置和服务。

---

## API 服务器

### 启动 API 服务器

1. 进入「设置中心」→「API 服务器」
2. 配置服务器参数：
   - **端口**: API 服务器端口（默认 8848）
   - **Context Path**: API 路径前缀（默认 `/nacos`）
3. 点击「启动服务器」按钮
4. 确认服务器状态为「运行中」

### 配置访问控制

**IP 白名单**:
1. 在设置中心启用「IP 白名单」
2. 添加允许访问的 IP 地址：
   - 精确匹配：`192.168.1.100`
   - CIDR 格式：`192.168.1.0/24`
   - 通配符：`192.168.*.*`
3. 保存配置

**请求限流**:
1. 在设置中心启用「请求限流」
2. 配置限流参数：
   - **令牌桶容量**: 令牌桶的最大容量
   - **每秒补充令牌数**: 每秒补充的令牌数量
   - **每个请求消耗令牌数**: 每个请求消耗的令牌数量
3. 保存配置

### 查看服务器监控

1. 在设置中心查看服务器监控信息：
   - **请求数**: 总请求数、成功数、错误数
   - **响应时间**: 平均、最小、最大响应时间
   - **性能指标**: 内存使用、CPU 使用率

### 查看访问日志

访问日志文件位置：应用数据目录下的 `logs` 目录

日志格式：
```
[时间戳] [IP] [方法] [路径] [状态码] [响应时间] [User-Agent]
```

---

## 设置中心

### 应用设置

**主题设置**:
- 选择浅色或深色主题

**语言设置**:
- 选择中文或英文

**命名空间显示方式**:
- 下拉选择或标签显示

### 数据管理

**数据库备份**:
1. 进入「设置中心」→「数据管理」
2. 点击「备份数据库」
3. 选择备份文件保存位置
4. 确认备份

**数据库恢复**:
1. 进入「设置中心」→「数据管理」
2. 点击「恢复数据库」
3. 选择备份文件
4. 确认恢复（**注意**: 恢复会覆盖当前数据）

**数据库清理**:
1. 进入「设置中心」→「数据管理」
2. 点击「清理数据库」
3. 选择要清理的数据类型
4. 确认清理

---

## 常见问题

### Q: 如何修改默认密码？

A: 首次登录后，可以在「权限控制」→「用户管理」中修改密码。

### Q: API 服务器无法启动？

A: 检查以下几点：
1. 端口是否被占用
2. 是否有足够的权限绑定端口
3. 查看错误日志

### Q: 如何查看 API 服务器的访问日志？

A: 访问日志文件位置：应用数据目录下的 `logs` 目录。日志文件按日期分割，超过 10MB 自动轮转。

### Q: 配置监听不生效？

A: 检查以下几点：
1. 客户端是否正确配置了 Nacos 服务器地址
2. 客户端是否使用了正确的命名空间和组
3. 客户端是否已正确认证

### Q: 服务注册后无法发现？

A: 检查以下几点：
1. 服务是否注册到正确的命名空间
2. 客户端是否使用相同的命名空间和组
3. 实例的健康状态是否为健康

### Q: 如何导出所有配置？

A: 在配置管理页面，不选择任何配置，直接点击「导出」按钮，可以导出当前命名空间下的所有配置。

### Q: 导入配置时如何处理冲突？

A: 导入配置时可以选择冲突处理策略：
- **终止**: 遇到冲突时停止导入
- **跳过**: 跳过冲突的配置，继续导入其他配置
- **覆盖**: 覆盖已存在的配置

---

## 参考文档

- [Spring Boot 集成指南](./api-server-integration.md)
- [开发规范指南](./development-guide.md)
- [Nacos 官方文档](https://nacos.io/docs/latest/)

